#U-16釧路プログラミングコンテスト競技用プログラミングマニュアル
<p><img src="http://i.imgur.com/9yYwzxu.png" alt="ロゴ" width="30%" height="30%"></p>

##1. 使用言語
使用言語はRubyです．

###1.1 Rubyとは
Ruby（ルビー）は，まつもとゆきひろ氏により開発されたオブジェクト指向スクリプト言語です．

##2. 今回使用するファイル

CHaserConnect.rb, Test1.rb, Test2.rb

* CHaserConnect.rb はサーバ接続と競技コマンドを送信する命令が入っている通信プログラム
* Test1.rb は上下左右をsearchするだけのプログラム
* Test2.rb は壁にそって進むだけのプログラム

※注：CHaserConnect.rb の内容は変更しません．

##3. プログラムについて
###3.1 ソースコードの全体

* Test1.rb ~ひたすら四方をsearchする~

* Test2.rb ~壁にそって進む~

###3.2 コメントアウト
文の前に#（シャープ）をつけるとコメントアウトというものになりプログラムで実行されなくなります．

###3.3 代入
変数 = 値  
と書くと変数に値が代入されます．  
例えば変数`a`に1を代入するときは

~~~
a = 1
~~~

と書きます．

###3.4 競技サーバへの接続

~~~
target = CHaserConnect.new("名前", ポート番号, 'IPアドレス（ホスト名）')
~~~

でサーバに接続します．  
`"名前"`は4文字以内で好きな名前にできます．  
ポート番号は，先攻なら40000, 後攻なら50000にします．  
自分のパソコン内だけで対戦を行う場合，IPアドレスを`'localhost'`または`'127.0.0.1'`とします．  
実際に接続する場合にはサーバのIPアドレスとなります．

###3.5 競技サーバとの切断

~~~
target.close
~~~
で競技サーバとの通信を切断します．  
プログラムの最後に呼び出しますが，意識しなくても良いです．

###3.6 配列
~~~
values = Array.new(10)
~~~
で配列と呼ばれる10個の入れ物を用意します．  
この部分は特に変更する必要がありません．  
`values`にはクライアントの制御情報と周囲情報が格納（代入）されます．  
`values[i]`の`[i]`の部分は添字といい，`i`番目の入れ物に入っている値を得ることができます．  
例えば，`values[0]`で0番目の値を得ることができます（プログラミング言語の多くは0からスタートします）．

###3.7 ループ
~~~
loop do
  行いたい処理
end
~~~
で`loop do ... end`に囲まれている部分の処理を無限に繰り返します．  
endを忘れないこと．

`break`を処理中で書くことでループから抜け出すことができます．

###3.8 if文（条件文）
「もし〜ならば...する」のような処理
~~~
if 条件式
  行いたい処理
end
~~~
で条件式が真（条件と一致）だった場合，`if ... end`に囲まれている部分の処理を実行します．  
同じくendを忘れない．

~~~
if 条件式
  処理1
else
  処理2
end
~~~
で条件式が真だった場合，処理1を，条件式が偽（条件と一致しない）だった場合，処理2を実行します．

~~~
if 条件式1
  処理1
elsif 条件式2
  処理2
end
~~~
で条件式1が真だった場合，処理1を，条件式2が真だった場合，処理2を実行します．  
elsif と else を組み合わせて使用することもできます．  
elsif は何個あってもいいですがelseは1個のみです．

###3.9 条件式
`値1 == 値2`：値1と値2が等しい  
`値1 > 値2`：値1が値2より大きい  
`値1 >= 値2`：値1が値2以上  
`値1 < 値2`：値1が値2より小さい  
`値1 <= 値2`：値1が値2以下  
`値1 != 値2`：値1と値2が等しくない

他にも条件式の種類がありますがここでは紹介しません．  
他の条件式が必要となる場合は個人で調べてみてください．

###3.10 準備信号
ターンの最初に準備信号というものサーバに送ります．
~~~
values = target.getReady
~~~
という形でサーバに送信し，サーバから制御情報と周囲情報を取得します．

※注  
~~~
values = target.getReady
if values[0] == 0
  break
end
~~~
と競技用コマンドを呼び出す前に書き，サーバが停止している場合ループから抜け出します．

###3.11 競技用コマンド
~~~
values = target.コマンド名
~~~
といった形でコマンドを呼び出す．  
targetはサーバ接続のときの変数名．

* walk系
  * `walkUp` 上に1マス動く
  * `walkDown` 下に1マス動く
  * `walkLeft` 左に1マス動く
  * `walkRight` 右に1マス動く
* look系
  * `lookUp` 自分の上の9マス(3x3)の情報を取得する
  * `lookDown` 自分の下の9マス(3x3)の情報を取得する
  * `lookLeft` 自分の左の9マス(3x3)の情報を取得する
  * `lookRight` 自分の右の9マス(3x3)の情報を取得する
* search系
  * `searchUp` 自分の上の9マス（1列）に情報を取得する
  * `searchDown` 自分の下の9マス（1列）に情報を取得する
  * `searchLeft` 自分の左の9マス（1列）に情報を取得する
  * `searchRight` 自分の右の9マス（1列）に情報を取得する
* put系
  * `putUp` 自分の上にブロックを置く
  * `putDown` 自分の下にブロックを置く
  * `putLeft` 自分の左にブロックを置く
  * `putRight` 自分の右にブロックを置く

###3.12 valuesの中身について
`values[0]`には制御情報が格納されます．1の場合サーバが対戦を実行中で，0の場合対戦が終了しています．  
`values[1]~values[9]`には周囲情報としてパーツの番号が格納されます．  
パーツ番号は

* 床（何もなし）：0
* キャラクタ（敵）：1
* ブロック：2
* アイテム（ハート）：3

となっています．

##4. ステップアップヒント
〜どのようにプログラムを作っていけばよいかわからない人へ〜

###4.1 ひたすら真っすぐ進む
とりあえず真っ直ぐ進むプログラムを作ってみましょう．

###4.2 壁にぶつからない
真っ直ぐ進むプログラムができたら，壁があったら方向転換するようにして，壁にぶつからないようにしましょう．

###4.3 アイテムを取る
アイテムが自分の隣にあったら，そのアイテムを取りに行くようにしましょう．

###4.4 敵にブロックを置く
敵が隣にいた場合にブロックを置くようにしましょう．

##更新履歴
2014/03/04 ロゴを追加: Nobuyuki SAKAI  
2014/03/01 マニュアル作成: Nobuyuki SAKAI
